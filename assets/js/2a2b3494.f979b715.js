"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[158],{9021:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),s=["components"],i={id:"how-to-start-backend-on-boot",title:"How to start backend on boot"},d=void 0,c={unversionedId:"guides/how-to-start-backend-on-boot",id:"guides/how-to-start-backend-on-boot",isDocsHomePage:!1,title:"How to start backend on boot",description:"By default the current backend will stop when docker is restarted and has to be manually started after. Instead of manually starting it you can add a restart policy to the containers in the docker-compose file.",source:"@site/docs/guides/how-to-start-backend-on-boot.md",sourceDirName:"guides",slug:"/guides/how-to-start-backend-on-boot",permalink:"/docs/guides/how-to-start-backend-on-boot",editUrl:"https://github.com/gapitio/grafana-360-viewer/edit/main/website/docs/guides/how-to-start-backend-on-boot.md",tags:[],version:"current",frontMatter:{id:"how-to-start-backend-on-boot",title:"How to start backend on boot"},sidebar:"docsSidebar",previous:{title:"How to change password",permalink:"/docs/guides/how-to-change-password"}},p=[],l={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"By default the current backend will stop when docker is restarted and has to be manually started after. Instead of manually starting it you can add a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/run/#restart-policies---restart"},"restart policy")," to the containers in the docker-compose file."),(0,r.kt)("p",null,"Add the 3 highlighted lines shown below into the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file in the backend folder."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"{6,19,32}","{6,19,32}":!0},'version: "3"\n\nservices:\n  grafana-360-viewer-postgres:\n    image: postgres:13\n    restart: always # THIS LINE\n    ports:\n      - 3201:5432\n    volumes:\n      - ./sql/init/:/docker-entrypoint-initdb.d\n      - ./postgres:/var/lib/postgresql/data:rw\n    environment:\n      POSTGRES_DB: app_db\n      POSTGRES_USER: app_user\n      POSTGRES_PASSWORD: postgres_password\n\n  grafana-360-viewer-postgrest:\n    image: postgrest/postgrest:v8.0.0\n    restart: always # THIS LINE\n    environment:\n      PGRST_DB_URI: postgres://app_user:postgres_password@grafana-360-viewer-postgres:5432/app_db\n      PGRST_DB_SCHEMA: api\n      PGRST_DB_ANON_ROLE: web_anon\n      PGRST_SERVER_PROXY_URI: http://localhost:3202\n      PGRST_SERVER_PORT: 3202\n      PGRST_JWT_SECRET: jwt_secret_needs_to_be_32_or_more_letters\n    depends_on:\n      - grafana-360-viewer-postgres\n\n  grafana-360-viewer-backend:\n    image: nginx:1.21.3-alpine\n    restart: always # THIS LINE\n    volumes:\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf\n    ports:\n      - 3203:8080\n    depends_on:\n      - grafana-360-viewer-postgrest\n\nnetworks:\n  default:\n    external: true\n    name: grafana\n')))}u.isMDXComponent=!0}}]);